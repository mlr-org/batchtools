<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Define Problems for Experiments — addProblem • batchtools</title><!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/JetBrains_Mono-0.4.10/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Define Problems for Experiments — addProblem"><meta name="description" content="Problems may consist of up to two parts: A static, immutable part (data in addProblem)
and a dynamic, stochastic part (fun in addProblem).
For example, for statistical learning problems a data frame would be the static problem part while
a resampling function would be the stochastic part which creates problem instance.
This instance is then typically passed to a learning algorithm like a wrapper around a statistical model
(fun in addAlgorithm).
This function serialize all components to the file system and registers the problem in the ExperimentRegistry.
removeProblem removes all jobs from the registry which depend on the specific problem.
reg$problems holds the IDs of already defined problems."><meta property="og:description" content="Problems may consist of up to two parts: A static, immutable part (data in addProblem)
and a dynamic, stochastic part (fun in addProblem).
For example, for statistical learning problems a data frame would be the static problem part while
a resampling function would be the stochastic part which creates problem instance.
This instance is then typically passed to a learning algorithm like a wrapper around a statistical model
(fun in addAlgorithm).
This function serialize all components to the file system and registers the problem in the ExperimentRegistry.
removeProblem removes all jobs from the registry which depend on the specific problem.
reg$problems holds the IDs of already defined problems."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">batchtools</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.9.17-9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html"><span class="fa fa-file-alt"></span> Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr3book.mlr-org.com"><span class="fa fa-link"></span> mlr3book</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mlr-org/batchtools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/"><span class="fa fa-comments"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://stackoverflow.com/questions/tagged/mlr3"><span class="fa fab fa-stack-overflow"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://mlr-org.com/"><span class="fa fa-rss"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Define Problems for Experiments</h1>
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/batchtools/blob/main/R/Problem.R" class="external-link"><code>R/Problem.R</code></a></small>
      <div class="d-none name"><code>addProblem.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Problems may consist of up to two parts: A static, immutable part (<code>data</code> in <code>addProblem</code>)
and a dynamic, stochastic part (<code>fun</code> in <code>addProblem</code>).
For example, for statistical learning problems a data frame would be the static problem part while
a resampling function would be the stochastic part which creates problem instance.
This instance is then typically passed to a learning algorithm like a wrapper around a statistical model
(<code>fun</code> in <code><a href="addAlgorithm.html">addAlgorithm</a></code>).</p>
<p>This function serialize all components to the file system and registers the problem in the <code><a href="makeExperimentRegistry.html">ExperimentRegistry</a></code>.</p>
<p><code>removeProblem</code> removes all jobs from the registry which depend on the specific problem.
<code>reg$problems</code> holds the IDs of already defined problems.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">addProblem</span><span class="op">(</span></span>
<span>  <span class="va">name</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  fun <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reg <span class="op">=</span> <span class="fu"><a href="getDefaultRegistry.html">getDefaultRegistry</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">removeProblems</span><span class="op">(</span><span class="va">name</span>, reg <span class="op">=</span> <span class="fu"><a href="getDefaultRegistry.html">getDefaultRegistry</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>[<code>character(1)</code>]<br>
Unique identifier for the problem.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>[<code>ANY</code>]<br>
Static problem part. Default is <code>NULL</code>.</p></dd>


<dt id="arg-fun">fun<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>[<code>function</code>]<br>
The function defining the stochastic problem part.
The static part is passed to this function with name “data” and the <code><a href="JobExperiment.html">Job</a></code>/<code><a href="JobExperiment.html">Experiment</a></code>
is passed as “job”.
Therefore, your function must have the formal arguments “job” and “data” (or dots <code>...</code>).
If you do not provide a function, it defaults to a function which just returns the data part.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>[<code>integer(1)</code>]<br>
Start seed for this problem. This allows the “synchronization” of a stochastic
problem across algorithms, so that different algorithms are evaluated on the same stochastic instance.
If the problem seed is defined, the seeding mechanism works as follows:
(1) Before the dynamic part of a problem is instantiated,
the seed of the problem + [replication number] - 1 is set, i.e. the first
replication uses the problem seed. (2) The stochastic part of the problem is
instantiated. (3) From now on the usual experiment seed of the registry is used,
see <code><a href="makeExperimentRegistry.html">ExperimentRegistry</a></code>.
If <code>seed</code> is set to <code>NULL</code> (default), the job seed is used to instantiate the problem and
different algorithms see different stochastic instances of the same problem.</p></dd>


<dt id="arg-cache">cache<a class="anchor" aria-label="anchor" href="#arg-cache"></a></dt>
<dd><p>[<code>logical(1)</code>]<br>
If <code>TRUE</code> and <code>seed</code> is set, problem instances will be cached on the file system.
This assumes that each problem instance is deterministic for each combination of hyperparameter setting
and each replication number.
This feature is experimental.</p></dd>


<dt id="arg-reg">reg<a class="anchor" aria-label="anchor" href="#arg-reg"></a></dt>
<dd><p>[<code><a href="makeExperimentRegistry.html">ExperimentRegistry</a></code>]<br>
Registry. If not explicitly passed, uses the last created registry.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>[<code>Problem</code>]. Object of class “Problem” (invisibly).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="addAlgorithm.html">Algorithm</a></code>, <code><a href="addExperiments.html">addExperiments</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">tmp</span> <span class="op">=</span> <span class="fu"><a href="makeExperimentRegistry.html">makeExperimentRegistry</a></span><span class="op">(</span>file.dir <span class="op">=</span> <span class="cn">NA</span>, make.default <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No readable configuration file found</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Created registry in '/tmp/batchtools-example/reg' using cluster functions 'Interactive'</span>
<span class="r-in"><span><span class="fu">addProblem</span><span class="op">(</span><span class="st">"p1"</span>, fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">job</span>, <span class="va">data</span><span class="op">)</span> <span class="va">data</span>, reg <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding problem 'p1'</span>
<span class="r-in"><span><span class="fu">addProblem</span><span class="op">(</span><span class="st">"p2"</span>, fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">job</span>, <span class="va">data</span><span class="op">)</span> <span class="va">job</span>, reg <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding problem 'p2'</span>
<span class="r-in"><span><span class="fu"><a href="addAlgorithm.html">addAlgorithm</a></span><span class="op">(</span><span class="st">"a1"</span>, fun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">job</span>, <span class="va">data</span>, <span class="va">instance</span><span class="op">)</span> <span class="va">instance</span>, reg <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding algorithm 'a1'</span>
<span class="r-in"><span><span class="fu"><a href="addExperiments.html">addExperiments</a></span><span class="op">(</span>repls <span class="op">=</span> <span class="fl">2</span>, reg <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding 2 experiments ('p1'[1] x 'a1'[1] x repls[2]) ...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding 2 experiments ('p2'[1] x 'a1'[1] x repls[2]) ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># List problems, algorithms and job parameters:</span></span></span>
<span class="r-in"><span><span class="va">tmp</span><span class="op">$</span><span class="va">problems</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "p1" "p2"</span>
<span class="r-in"><span><span class="va">tmp</span><span class="op">$</span><span class="va">algorithms</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a1"</span>
<span class="r-in"><span><span class="fu"><a href="getJobTable.html">getJobPars</a></span><span class="op">(</span>reg <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;job.id&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    job.id problem prob.pars algorithm algo.pars</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;int&gt;  &lt;char&gt;    &lt;list&gt;    &lt;char&gt;    &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      1      p1 &lt;list[0]&gt;        a1 &lt;list[0]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      2      p1 &lt;list[0]&gt;        a1 &lt;list[0]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:      3      p2 &lt;list[0]&gt;        a1 &lt;list[0]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:      4      p2 &lt;list[0]&gt;        a1 &lt;list[0]&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove one problem</span></span></span>
<span class="r-in"><span><span class="fu">removeProblems</span><span class="op">(</span><span class="st">"p1"</span>, reg <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Removing Problem 'p1' and 2 corresponding jobs ...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># List problems and algorithms:</span></span></span>
<span class="r-in"><span><span class="va">tmp</span><span class="op">$</span><span class="va">problems</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "p2"</span>
<span class="r-in"><span><span class="va">tmp</span><span class="op">$</span><span class="va">algorithms</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "a1"</span>
<span class="r-in"><span><span class="fu"><a href="getJobTable.html">getJobPars</a></span><span class="op">(</span>reg <span class="op">=</span> <span class="va">tmp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;job.id&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    job.id problem prob.pars algorithm algo.pars</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;int&gt;  &lt;char&gt;    &lt;list&gt;    &lt;char&gt;    &lt;list&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:      3      p2 &lt;list[0]&gt;        a1 &lt;list[0]&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:      4      p2 &lt;list[0]&gt;        a1 &lt;list[0]&gt;</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michel Lang, Bernd Bischl.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

